<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f0a1a">
    <title>IsekaiLife - Anime Isekai Life Simulator</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Title Screen -->
        <div id="title-screen" class="screen active">
            <div class="title-container">
                <div class="title-glow"></div>
                <h1 class="game-title">âš”ï¸ IsekaiLife âš”ï¸</h1>
                <p class="game-subtitle">~ Another World Life Simulator ~</p>
                <div class="title-art">
                    <span class="float-icon">ğŸŒ¸</span>
                    <span class="float-icon delay1">âš¡</span>
                    <span class="float-icon delay2">ğŸ‰</span>
                    <span class="float-icon delay3">ğŸ—¡ï¸</span>
                    <span class="float-icon delay4">âœ¨</span>
                </div>
                
                <!-- Language Selection -->
                <div class="language-selector">
                    <button class="lang-btn active">ğŸ‡¬ğŸ‡§ English</button>
                    <button class="lang-btn" onclick="switchToArabic()">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                </div>
                <script>
                    function switchToArabic() {
                        var base = window.location.href.split('?')[0].replace(/\/index\.html$/i, '').replace(/\/$/, '');
                        window.location.href = base + '/arabic/index.html';
                    }
                </script>
                
                <button class="btn btn-primary btn-large pulse" onclick="game.startNewGame()">
                    âœ¦ New Reincarnation âœ¦
                </button>
                <button class="btn btn-secondary" onclick="game.loadGame()" id="load-btn" style="display:none;">
                    Continue Journey
                </button>
            </div>
        </div>

        <!-- Death/Reincarnation Screen -->
        <div id="death-screen" class="screen">
            <div class="death-container">
                <div id="death-narrative" class="narrative-text"></div>
                <button class="btn btn-primary" id="death-continue-btn" style="display:none;" onclick="game.showReincarnation()">
                    Accept Your Fate...
                </button>
            </div>
        </div>

        <!-- Character Creation -->
        <div id="creation-screen" class="screen">
            <div class="creation-container">
                <h2>ğŸŒŸ Choose Your New Life ğŸŒŸ</h2>
                <p class="subtitle">The Goddess presents you with a new beginning...</p>
                
                <!-- Gender Selection (First Step) -->
                <div id="gender-selection" class="gender-selection">
                    <label class="section-label">First, choose your gender:</label>
                    <div class="gender-buttons">
                        <button class="gender-btn" onclick="game.selectGenderAndGenerate('male')">
                            <span class="gender-icon">â™‚ï¸</span>
                            <span class="gender-text">Male</span>
                        </button>
                        <button class="gender-btn" onclick="game.selectGenderAndGenerate('female')">
                            <span class="gender-icon">â™€ï¸</span>
                            <span class="gender-text">Female</span>
                        </button>
                    </div>
                </div>

                <!-- Character Choices (Second Step - Hidden Initially) -->
                <div id="character-selection" style="display: none;">
                    <div class="selected-gender-info">
                        <span id="selected-gender-text"></span>
                        <button class="btn-small" onclick="game.backToGenderSelect()">â† Change Gender</button>
                    </div>
                    <div id="character-choices" class="character-choices">
                        <!-- Random characters will be generated here -->
                    </div>
                    <div class="reroll-section">
                        <button class="btn btn-secondary" onclick="game.generateNewChoices()">
                            ğŸ”„ Show Different Options
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Game Screen -->
        <div id="game-screen" class="screen">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="char-info">
                    <span id="char-display-name" class="char-name">Hero</span>
                    <span id="char-title" class="char-title">Lv.1 Novice</span>
                </div>
                <div class="age-display">
                    <span>Age: <strong id="char-age">0</strong></span>
                    <span>Year: <strong id="world-year">1</strong></span>
                </div>
                <div class="top-buttons">
                    <button class="btn-icon" onclick="game.saveGame()" title="Save">ğŸ’¾</button>
                    <button class="btn-icon" onclick="game.toggleMenu()" title="Menu">â˜°</button>
                </div>
            </div>

            <!-- Mood Bar -->
            <div class="mood-bar">
                <span id="mood-icon">ğŸ˜Š</span>
                <span id="mood-text">Happy</span>
                <div class="mood-meter">
                    <div class="mood-fill mood-happy" id="mood-fill" style="width: 70%"></div>
                </div>
                <span class="mood-value-num" id="mood-value">70</span>
            </div>

            <!-- Stats Panel -->
            <div class="stats-panel" id="stats-panel">
                <!-- Compact stats (always visible) -->
                <div class="stats-compact" id="stats-compact" onclick="game.toggleStats()">
                    <span class="compact-stat">â¤ï¸ <span id="hp-compact">100</span></span>
                    <span class="compact-stat">ğŸ’™ <span id="mp-compact">50</span></span>
                    <span class="compact-stat">âš”ï¸ <span id="str-compact">10</span></span>
                    <span class="compact-stat">ğŸ§  <span id="int-compact">10</span></span>
                    <span class="compact-stat">ğŸ’¨ <span id="agi-compact">10</span></span>
                    <span class="compact-stat">ğŸ’° <span id="gold-compact">0</span></span>
                    <span class="stats-toggle" id="stats-toggle">â–¼</span>
                </div>
                <!-- Full stats (hidden by default) -->
                <div class="stats-full" id="stats-full">
                    <div class="stat-row">
                        <span class="stat-label">â¤ï¸ HP</span>
                        <div class="stat-bar"><div class="stat-fill hp-fill" id="hp-bar"></div></div>
                        <span class="stat-value" id="hp-value">100/100</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ğŸ’™ MP</span>
                        <div class="stat-bar"><div class="stat-fill mp-fill" id="mp-bar"></div></div>
                        <span class="stat-value" id="mp-value">50/50</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">âš”ï¸ STR</span>
                        <div class="stat-bar"><div class="stat-fill str-fill" id="str-bar"></div></div>
                        <span class="stat-value" id="str-value">10</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ğŸ§  INT</span>
                        <div class="stat-bar"><div class="stat-fill int-fill" id="int-bar"></div></div>
                        <span class="stat-value" id="int-value">10</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ğŸ’¨ AGI</span>
                        <div class="stat-bar"><div class="stat-fill agi-fill" id="agi-bar"></div></div>
                        <span class="stat-value" id="agi-value">10</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ğŸ’– CHA</span>
                        <div class="stat-bar"><div class="stat-fill cha-fill" id="cha-bar"></div></div>
                        <span class="stat-value" id="cha-value">10</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ğŸ€ LCK</span>
                        <div class="stat-bar"><div class="stat-fill lck-fill" id="lck-bar"></div></div>
                        <span class="stat-value" id="lck-value">10</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ğŸ’° Gold</span>
                        <span class="stat-value gold-value" id="gold-value">0 G</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">â­ Fame</span>
                        <span class="stat-value fame-value" id="fame-value">0</span>
                    </div>
                </div>
            </div>

            <!-- Event Log (scrollable) -->
            <div class="event-log" id="event-log">
                <div class="log-entries" id="log-entries"></div>
            </div>

            <!-- Action/Choice Panel -->
            <div class="action-panel" id="action-panel">
                <!-- Dynamic choices appear here -->
            </div>

            <!-- Bottom Navigation -->
            <div class="bottom-nav">
                <button class="nav-btn active" onclick="game.switchTab('story')" data-tab="story">
                    ğŸ“–<span>Story</span>
                </button>
                <button class="nav-btn" onclick="game.switchTab('actions')" data-tab="actions">
                    âš¡<span>Actions</span>
                </button>
                <button class="nav-btn" onclick="game.switchTab('family')" data-tab="family">
                    ğŸ‘¨â€ğŸ‘©â€ğŸ‘§<span>Family</span>
                </button>
                <button class="nav-btn" onclick="game.switchTab('relationships')" data-tab="relationships">
                    ğŸ’•<span>Party</span>
                </button>
                <button class="nav-btn" onclick="game.switchTab('stats')" data-tab="stats">
                    ğŸ“Š<span>Stats</span>
                </button>
                <button class="nav-btn" onclick="game.switchTab('inventory')" data-tab="inventory">
                    ğŸ’<span>Items</span>
                </button>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameover-screen" class="screen">
            <div class="gameover-content">
                <h1>ğŸ’€ Game Over</h1>
                <div id="death-cause" class="death-cause"></div>
                <div id="life-summary" class="life-summary"></div>
                <button class="btn btn-primary" onclick="game.startNewGame()">ğŸ”„ Start New Life</button>
                <button class="btn btn-secondary" onclick="location.reload()" style="margin-top:10px;">ğŸ  Return to Title</button>
            </div>
        </div>

        <!-- Notification popup -->
        <div id="notification" class="notification"></div>

        <!-- Side Menu -->
        <div id="side-menu" class="side-menu">
            <div class="menu-content">
                <h3>â˜° Menu</h3>
                <button class="menu-btn" onclick="game.saveGame()">ğŸ’¾ Save Game</button>
                <button class="menu-btn" onclick="game.showCharacterSheet()">ğŸ“‹ Character Sheet</button>
                <button class="menu-btn" onclick="game.showQuestLog()">ğŸ“œ Quest Log</button>
                <button class="menu-btn" onclick="game.showAchievements()">ğŸ† Achievements</button>
                <button class="menu-btn" onclick="game.toggleMenu()">âŒ Close</button>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="engine.js"></script>
    <script src="events.js"></script>
    <script src="game.js"></script>
</body>
</html>
